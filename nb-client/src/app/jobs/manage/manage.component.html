<div class="container pt-5">
  <div class="row d-flex align-items-end pb-4">
    <div class="col">
      <h4 class="display-4 mb-0"><i [class]="job?.type?.fa"></i>&nbsp;{{ job?.title || ('jobs.job' | translate) }}</h4>
    </div>
  </div>
  <div class="row">
    <div class="col-sm-6">
      <form *ngIf="job">
        <mat-progress-bar mode="determinate" color="warn" [value]="jobProgress(job)"></mat-progress-bar>
        <div class="form-group mb-0 row" *ngFor="let key of ['blocks', 'running_blocks', 'idle_blocks', 'finished_blocks']">
          <label class="col-sm-4 col-form-label">{{ 'jobs.' + key | translate }}</label>
          <div class="col-sm-8">
            <input type="text" readonly class="form-control-plaintext" [value]="job[key]">
          </div>
        </div>
      </form>
    </div>
    <div class="col-sm-6">
      <p class="mt-3">{{ fetchResponse | json }}</p>
      <div class="card" *ngIf="job">
        <div class="card-body">
          <job-run [job]="job" (updateJob)="getJob()"></job-run>
        </div>
      </div>
    </div>
    <div class="col-12 pt-3">
      <p>
        <button class="btn btn-success" (click)="finalizeJob()">{{ 'jobs.finalize' | translate }}</button>
      </p>
      <code *ngIf="jobResult">{{ jobResult | json }}</code>
    </div>
    <div class="col-12 pt-3">
      <div class="row">
        <div class="col">
          <a class="link text-muted ml-2" routerLink="/jobs">
            {{ 'common.back' | translate }}
          </a>
        </div>
        <div class="col text-right">
          <a class="link text-danger" (click)="remove(job)">
            {{ 'common.remove' | translate }}
          </a>
        </div>
      </div>
    </div>
  </div>
</div>
